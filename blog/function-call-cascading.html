<!DOCTYPE html><html lang="en" style="height:100%"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Tsoobame - Function call cascading considered harmful</title><meta name="next-head-count" content="3"/><title>Tsoobame</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" href="https://unpkg.com/prism-themes@1.9.0/themes/prism-vsc-dark-plus.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Z67DVHFVCM"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-Z67DVHFVCM', {
              page_path: window.location.pathname,
            });
          </script><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-71eb4fcc773b358e.js" defer=""></script><script src="/_next/static/chunks/framework-9b5d6ec4444c80fa.js" defer=""></script><script src="/_next/static/chunks/main-acfafc49f148be44.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8e879b9ffe259828.js" defer=""></script><script src="/_next/static/chunks/eb1842f2-061a5c601fb6b566.js" defer=""></script><script src="/_next/static/chunks/181-fa4e5b0dcaf48e99.js" defer=""></script><script src="/_next/static/chunks/398-04847620f600e7d3.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-11c97c28d38d2849.js" defer=""></script><script src="/_next/static/C7JIGo2bhUdVsan4ZWi65/_buildManifest.js" defer=""></script><script src="/_next/static/C7JIGo2bhUdVsan4ZWi65/_ssgManifest.js" defer=""></script><style id="jss-server-side">.jss1 {
  background: linear-gradient(90deg, #00766c, #0077c2);
}
.jss3 {
  overflow-x: auto;
  justify-content: space-between;
}
.jss4 {
  padding: 8px;
  flex-shrink: 0;
}
.jss5 {
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 1;
  position: fixed;
}
.jss6 {
  color: #FFFFFF;
  width: 100%;
  bottom: 0;
  padding: 16px 0px;
  z-index: 99;
  position: fixed;
  background: linear-gradient(90deg, #00766c, #0077c2);
}</style></head><body style="padding:0;margin:0;min-height:100%"><div id="__next"><style data-emotion="css 1a51u83">.css-1a51u83{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;background-color:#26a69a;color:#FFFFFF;}</style><style data-emotion="css 1rhdqfh">.css-1rhdqfh{background-color:#FFFFFF;color:#263238;-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;background-color:#26a69a;color:#FFFFFF;}</style><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic jss5 css-1rhdqfh" style="padding:0"><style data-emotion="css i6s8oy">.css-i6s8oy{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-i6s8oy{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-i6s8oy{min-height:48px;}}}@media (min-width:600px){.css-i6s8oy{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular jss1 css-i6s8oy"><style data-emotion="css 18zcnv2">.css-18zcnv2{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1.5rem;line-height:1.334;letter-spacing:0em;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:inherit;}</style><h2 class="MuiTypography-root MuiTypography-h5 MuiTypography-alignCenter MuiTypography-noWrap jss2 css-18zcnv2"><style data-emotion="css 1cik1k3">.css-1cik1k3{-webkit-text-decoration:underline;text-decoration:underline;color:inherit;}.css-1cik1k3:hover{text-decoration-color:inherit;}</style><style data-emotion="css 1c0wj8h">.css-1c0wj8h{margin:0;color:inherit;-webkit-text-decoration:underline;text-decoration:underline;color:inherit;}.css-1c0wj8h:hover{text-decoration-color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1c0wj8h" style="text-decoration:none" href="/">tsoobame</a></h2><style data-emotion="css i9gxme">.css-i9gxme{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="MuiBox-root css-i9gxme"><style data-emotion="css 4fvm0a">.css-4fvm0a{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#26a69a;color:#FFFFFF;}.css-4fvm0a:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(38, 166, 154, 0.04);}@media (hover: none){.css-4fvm0a:hover{background-color:transparent;}}.css-4fvm0a.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css ye6gas">.css-ye6gas{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#26a69a;color:#FFFFFF;}.css-ye6gas::-moz-focus-inner{border-style:none;}.css-ye6gas.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-ye6gas{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-ye6gas:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(38, 166, 154, 0.04);}@media (hover: none){.css-ye6gas:hover{background-color:transparent;}}.css-ye6gas.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-ye6gas" tabindex="0" type="button"><a style="color:white;text-decoration:none" href="/blog">Blog</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-ye6gas" tabindex="0" type="button"><a style="color:white;text-decoration:none" href="/about">About</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-ye6gas" tabindex="0" type="button"><a style="color:white;text-decoration:none" href="/projects">Projects</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-ye6gas" tabindex="0" type="button"><a style="color:white;text-decoration:none" href="/recommended-resources">Resources</a></button></div></div></header><div class="MuiBox-root css-0" style="position:relative;width:90%;padding-left:24px;padding-right:24px;margin-top:80px;padding-bottom:90px;z-index:0;min-height:100%"><div class="MuiBox-root css-0" style="width:auto;padding:12px"><style data-emotion="css 15bqboc">.css-15bqboc{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><div class="MuiGrid-root MuiGrid-container css-15bqboc"><style data-emotion="css 13ps8n2">.css-13ps8n2{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}@media (min-width:600px){.css-13ps8n2{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-13ps8n2{-webkit-flex-basis:25%;-ms-flex-preferred-size:25%;flex-basis:25%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:25%;}}@media (min-width:1200px){.css-13ps8n2{-webkit-flex-basis:25%;-ms-flex-preferred-size:25%;flex-basis:25%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:25%;}}@media (min-width:1536px){.css-13ps8n2{-webkit-flex-basis:25%;-ms-flex-preferred-size:25%;flex-basis:25%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:25%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-sm-12 MuiGrid-grid-md-3 css-13ps8n2" style="padding:6px"><div><style data-emotion="css t1nuxs">.css-t1nuxs{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1.5rem;line-height:1.334;letter-spacing:0em;margin-bottom:0.35em;}</style><h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs">Posts </h5><ul style="list-style-type:none"><li><style data-emotion="css 9l3uo3">.css-9l3uo3{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}</style><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a style="text-decoration:none;color:gray" href="/blog/data-loader">Understanding data loader</a></p></li><li><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a style="text-decoration:none;color:gray" href="/blog/graphql-schema-stitching">Graphql Schema Stitching</a></p></li><li><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a style="text-decoration:none;color:gray" href="/blog/shape-vs-optionality">Decomplecting shape and optionality</a></p></li><li><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a style="text-decoration:none;color:gray" href="/blog/docker-registry-mirror">Local docker registry mirror</a></p></li><li><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3"><a style="text-decoration:none;color:gray" href="/blog/function-call-cascading">Function call cascading considered harmful</a></p></li></ul></div></div><style data-emotion="css 1xd5sck">.css-1xd5sck{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-1xd5sck{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:900px){.css-1xd5sck{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1200px){.css-1xd5sck{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}@media (min-width:1536px){.css-1xd5sck{-webkit-flex-basis:75%;-ms-flex-preferred-size:75%;flex-basis:75%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:75%;}}</style><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-md-9 css-1xd5sck"><img src="/images/function-call-cascading.jpeg" style="height:200px;object-fit:cover" width="100%" height="200"/><p class="MuiTypography-root MuiTypography-body1 css-9l3uo3">⏱ <!-- -->4 min read</p><div class="MuiBox-root css-0">import { Mermaid } from &#x27;mdx-mermaid/lib/Mermaid&#x27;;<!-- -->
<style data-emotion="css 6s8q25">.css-6s8q25{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:3rem;line-height:1.167;letter-spacing:0em;margin-bottom:0.35em;}</style><h3 class="MuiTypography-root MuiTypography-h3 MuiTypography-gutterBottom css-6s8q25" style="margin-top:24px">Function call cascading considered harmful</h3>
<style data-emotion="css gtvj52">.css-gtvj52{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:2.125rem;line-height:1.235;letter-spacing:0.00735em;margin-bottom:0.35em;}</style><h4 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom css-gtvj52" style="margin-top:24px">Introduction</h4>
<style data-emotion="css wje1bd">.css-wje1bd{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;margin-bottom:16px;}</style><p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">Improving the reusability and composability of software components is a common goal we all strive for. However, more often than not, we find ourselves falling short without a clear understanding of why. Sometimes, we favor one approach over another without a solid rationale, labeling the differences as mere programming styles.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">In my case, I have a preference for writing code that reads like recipes. I strive to develop functions or components as if they will be utilized by multiple clients, even if that&#x27;s not the current scenario. This personal style offers benefits such as reusability and testability, but I have also realized that it tends to veer toward overengineering, so it&#x27;s important to keep that in check.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">During a recent refactoring process, I encountered a situation where the code followed a different style, and I found it more challenging to reason about, test, and reuse. Yet, I couldn&#x27;t pinpoint a specific term or a clear, general rationale to explain why I felt that way.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">Upon reflection, I discovered the root of the problem, and with the help of Chat GPT, I uncovered the terms associated with those distinct styles.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">To illustrate the problem clearly and make it more apparent, I will provide an example.</p>
<h4 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom css-gtvj52" style="margin-top:24px">The problem</h4>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">Consider a web application that processes user registrations. When a new user signs up, various tasks need to be performed, such as validating the user&#x27;s data, creating a user account, sending a confirmation email, and logging the registration event.</p>
<h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs" style="margin-top:24px">Function call cascading</h5>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">One way of implementing this functionality is using function call cascading:</p>
<div class="mermaid" data-mermaid-src="
  sequenceDiagram

  actor Client
  participant registerUser
  participant validateUser
  participant createUser
  participant sendConfirmationEmail
  participant logRegistration

  registerUser -&gt;&gt; validateUser: userData
  validateUser -&gt;&gt; createUser: userData
  createUser -&gt;&gt; sendConfirmationEmail: userData
  sendConfirmationEmail -&gt;&gt; logRegistration: userData">
  sequenceDiagram

  actor Client
  participant registerUser
  participant validateUser
  participant createUser
  participant sendConfirmationEmail
  participant logRegistration

  registerUser -&gt;&gt; validateUser: userData
  validateUser -&gt;&gt; createUser: userData
  createUser -&gt;&gt; sendConfirmationEmail: userData
  sendConfirmationEmail -&gt;&gt; logRegistration: userData</div>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">validateUser</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">validateUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>userData<span class="token punctuation">.</span><span class="token property-access">username</span> <span class="token operator">&amp;&amp;</span> userData<span class="token punctuation">.</span><span class="token property-access">email</span> <span class="token operator">&amp;&amp;</span> userData<span class="token punctuation">.</span><span class="token property-access">password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">createUser</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid user data.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to create a user account</span>

  <span class="token function">sendConfirmationEmail</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sendConfirmationEmail</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to send a confirmation email</span>

  <span class="token function">logRegistration</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">logRegistration</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to log the registration event</span>

  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;User registration completed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">Although this simplified code example might seem obvious, we often use this pattern and make functions call the next function in the sequence.</p>
<h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs" style="margin-top:24px">Recipe - Composition</h5>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">Another way is to use a recipe-like expression:</p>
<div class="mermaid" data-mermaid-src="
  sequenceDiagram

  actor Client
  participant registerUser
  participant validateUser
  participant createUser
  participant sendConfirmationEmail
  participant logRegistration

  registerUser -&gt;&gt; validateUser: userData
  registerUser -&gt;&gt; createUser: userData
  registerUser -&gt;&gt; sendConfirmationEmail: userData
  registerUser -&gt;&gt; logRegistration: userData">
  sequenceDiagram

  actor Client
  participant registerUser
  participant validateUser
  participant createUser
  participant sendConfirmationEmail
  participant logRegistration

  registerUser -&gt;&gt; validateUser: userData
  registerUser -&gt;&gt; createUser: userData
  registerUser -&gt;&gt; sendConfirmationEmail: userData
  registerUser -&gt;&gt; logRegistration: userData</div>
<div class="remark-highlight"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">validateUser</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">createUser</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sendConfirmationEmail</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">logRegistration</span><span class="token punctuation">(</span>userData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;User registration completed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;Invalid user data.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">validateUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> userData<span class="token punctuation">.</span><span class="token property-access">username</span> <span class="token operator">&amp;&amp;</span> userData<span class="token punctuation">.</span><span class="token property-access">email</span> <span class="token operator">&amp;&amp;</span> userData<span class="token punctuation">.</span><span class="token property-access">password</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to create a user account</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sendConfirmationEmail</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to send a confirmation email</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">logRegistration</span><span class="token punctuation">(</span><span class="token parameter">userData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Logic to log the registration event</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom css-gtvj52" style="margin-top:24px">Analysis</h4>
<h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs" style="margin-top:24px">Objective coupling</h5>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">When employing function call cascading, all functions become tightly coupled to the objectives of the functions they call down the line.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">For instance, let&#x27;s consider the <code>registerUser</code> function with the following goals:</p>
<ul>
<li><p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify;margin-bottom:3px">Validate user</p></li>
<li><p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify;margin-bottom:3px">Create user</p></li>
<li><p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify;margin-bottom:3px">Send confirmation email</p></li>
<li><p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify;margin-bottom:3px">Log registration</p></li>
</ul>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">In this case, the <code>validateUser</code> function will <strong>inherit</strong> the same goals as <code>registerUser</code>. Similarly, the <code>createUser</code> function will inherit all goals except for the validation of the user, and so on.</p>
<div class="mermaid" data-mermaid-src="
flowchart LR

subgraph Functions
  registerUser
  validateUser
  createUser
  sendConfirmationEmail
  logRegistration
end

subgraph Goals
  validate-user[validate user]
  create-user[create user]
  send-confirmation-email[send confirmation email]
  log-registration[log registration]
end

registerUser --&gt; validateUser
registerUser -.- validate-user
registerUser -.- create-user
registerUser -.- send-confirmation-email
registerUser -.- log-registration


validateUser --&gt; createUser
validateUser -.-&gt;validate-user
validateUser -.- create-user
validateUser -.- send-confirmation-email
validateUser -.- log-registration


createUser --&gt; sendConfirmationEmail
createUser -.-&gt;create-user
createUser -.- send-confirmation-email
createUser -.- log-registration


sendConfirmationEmail --&gt; logRegistration
sendConfirmationEmail -.-&gt;send-confirmation-email
sendConfirmationEmail -.- log-registration


logRegistration -.-&gt;log-registration">
flowchart LR

subgraph Functions
  registerUser
  validateUser
  createUser
  sendConfirmationEmail
  logRegistration
end

subgraph Goals
  validate-user[validate user]
  create-user[create user]
  send-confirmation-email[send confirmation email]
  log-registration[log registration]
end

registerUser --&gt; validateUser
registerUser -.- validate-user
registerUser -.- create-user
registerUser -.- send-confirmation-email
registerUser -.- log-registration


validateUser --&gt; createUser
validateUser -.-&gt;validate-user
validateUser -.- create-user
validateUser -.- send-confirmation-email
validateUser -.- log-registration


createUser --&gt; sendConfirmationEmail
createUser -.-&gt;create-user
createUser -.- send-confirmation-email
createUser -.- log-registration


sendConfirmationEmail --&gt; logRegistration
sendConfirmationEmail -.-&gt;send-confirmation-email
sendConfirmationEmail -.- log-registration


logRegistration -.-&gt;log-registration</div>
<div class="mermaid" data-mermaid-src="
flowchart LR

subgraph Functions
  registerUser
  validateUser
  createUser
  sendConfirmationEmail
  logRegistration
end

subgraph Goals
  validate-user[validate user]
  create-user[create user]
  send-confirmation-email[send confirmation email]
  log-registration[log registration]
end

registerUser --&gt; validateUser
registerUser --&gt; createUser
registerUser --&gt; sendConfirmationEmail
registerUser --&gt; logRegistration

registerUser -.- validate-user
registerUser -.- create-user
registerUser -.- send-confirmation-email
registerUser -.- log-registration


validateUser -.-&gt;validate-user

createUser -.-&gt;create-user

sendConfirmationEmail -.-&gt;send-confirmation-email

logRegistration -.-&gt;log-registration">
flowchart LR

subgraph Functions
  registerUser
  validateUser
  createUser
  sendConfirmationEmail
  logRegistration
end

subgraph Goals
  validate-user[validate user]
  create-user[create user]
  send-confirmation-email[send confirmation email]
  log-registration[log registration]
end

registerUser --&gt; validateUser
registerUser --&gt; createUser
registerUser --&gt; sendConfirmationEmail
registerUser --&gt; logRegistration

registerUser -.- validate-user
registerUser -.- create-user
registerUser -.- send-confirmation-email
registerUser -.- log-registration


validateUser -.-&gt;validate-user

createUser -.-&gt;create-user

sendConfirmationEmail -.-&gt;send-confirmation-email

logRegistration -.-&gt;log-registration</div>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">This means that I cannot use any of the intermediate functions in a different context than the one aimed at achieving all those goals.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">I intentionally use the term <strong>inherit</strong> because the problem is reminiscent of the issues that arise when using inheritance for code reusability.</p>
<h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs" style="margin-top:24px">Single responsibility</h5>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">In line with the issue of objective coupling, every function that calls another function becomes coupled with the responsibilities of the subsequent function. While this coupling may make sense in some cases, such as the <code>registerUser</code> function being responsible for all the effects (storing in a database, sending emails, etc.) related to user registration, even if it delegates each effect to a specific function.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">On the other hand, the <code>validateUser</code> function should solely be responsible for user validation. However, by utilizing function call cascading, we inadvertently introduce the responsibility of creating a user, sending emails, and so on.</p>
<h5 class="MuiTypography-root MuiTypography-h5 MuiTypography-gutterBottom css-t1nuxs" style="margin-top:24px">Testing</h5>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">When conducting integration testing on the <code>registerUser</code> function (or any other top-level entry point), it becomes necessary to mock the entire I/O environment to ensure</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">correct behavior. However, it would be preferable to conduct unit tests on the individual composed functions in isolation.</p>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">As a result of the objective and responsibility coupling, when function call cascading is used, we find ourselves obligated to mock the environment for testing each of the composed functions as well.</p>
<blockquote>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">It&#x27;s worth noting that certain languages, like Python with pytest fixtures, provide mechanisms that facilitate the mocking of intermediate functions.</p>
</blockquote>
<h4 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom css-gtvj52" style="margin-top:24px">Conclusion</h4>
<p class="MuiTypography-root MuiTypography-body1 MuiTypography-paragraph css-wje1bd" style="text-align:justify">To enhance code reusability, testability, readability, and more, it is crucial to be self-conscious when encountering deep function call cascades. Take a moment to consider whether the flow you&#x27;re attempting to describe could be flattened and written as a recipe instead. I firmly believe that by keeping a vigilant eye on this aspect, we can improve both our code and our overall development experiences.</p></div></div></div></div></div><footer class="jss6"><style data-emotion="css 1qsxih2">.css-1qsxih2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-1qsxih2{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.css-1qsxih2{max-width:1200px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthLg css-1qsxih2"><style data-emotion="css 1is0dyx">.css-1is0dyx{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;text-align:center;color:inherit;}</style><p class="MuiTypography-root MuiTypography-body2 MuiTypography-alignCenter css-1is0dyx">Copyright © <!-- -->tonitienda <!-- -->2023<!-- -->.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Function call cascading considered harmful","date":"2023-05-24","description":"Function call cascading hits the composability, testability and reusability of software components and should be avoided in preference for sequential and explicit function calling.","thumbnail":{"url":"/images/function-call-cascading.jpeg","attribution":{"name":"Sarah Doffman","url":"https://unsplash.com/@sarahdoffman?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText"}},"tags":["software","anti-patterns","composition"],"filePath":"function-call-cascading.mdx","slug":"function-call-cascading","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    h2: \"h2\",\n    p: \"p\",\n    h3: \"h3\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    blockquote: \"blockquote\"\n  }, _provideComponents(), props.components), {Mermaid} = _components;\n  if (!Mermaid) _missingMdxReference(\"Mermaid\", true);\n  return _jsxs(_Fragment, {\n    children: [\"import { Mermaid } from 'mdx-mermaid/lib/Mermaid';\", \"\\n\", _jsx(_components.h1, {\n      children: \"Function call cascading considered harmful\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Introduction\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Improving the reusability and composability of software components is a common goal we all strive for. However, more often than not, we find ourselves falling short without a clear understanding of why. Sometimes, we favor one approach over another without a solid rationale, labeling the differences as mere programming styles.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In my case, I have a preference for writing code that reads like recipes. I strive to develop functions or components as if they will be utilized by multiple clients, even if that's not the current scenario. This personal style offers benefits such as reusability and testability, but I have also realized that it tends to veer toward overengineering, so it's important to keep that in check.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"During a recent refactoring process, I encountered a situation where the code followed a different style, and I found it more challenging to reason about, test, and reuse. Yet, I couldn't pinpoint a specific term or a clear, general rationale to explain why I felt that way.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Upon reflection, I discovered the root of the problem, and with the help of Chat GPT, I uncovered the terms associated with those distinct styles.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To illustrate the problem clearly and make it more apparent, I will provide an example.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"The problem\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Consider a web application that processes user registrations. When a new user signs up, various tasks need to be performed, such as validating the user's data, creating a user account, sending a confirmation email, and logging the registration event.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Function call cascading\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"One way of implementing this functionality is using function call cascading:\"\n    }), \"\\n\", _jsx(Mermaid, {\n      chart: \"\\n  sequenceDiagram\\n\\n  actor Client\\n  participant registerUser\\n  participant validateUser\\n  participant createUser\\n  participant sendConfirmationEmail\\n  participant logRegistration\\n\\n  registerUser -\u003e\u003e validateUser: userData\\n  validateUser -\u003e\u003e createUser: userData\\n  createUser -\u003e\u003e sendConfirmationEmail: userData\\n  sendConfirmationEmail -\u003e\u003e logRegistration: userData\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-javascript\",\n        children: _jsxs(_components.code, {\n          className: \"language-javascript\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"registerUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"validateUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"validateUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token keyword control-flow\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"username\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u0026\u0026\"\n          }), \" userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"email\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u0026\u0026\"\n          }), \" userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"password\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword control-flow\",\n            children: \"else\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token console class-name\",\n            children: \"console\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"log\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Invalid user data.\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to create a user account\"\n          }), \"\\n\\n  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sendConfirmationEmail\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sendConfirmationEmail\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to send a confirmation email\"\n          }), \"\\n\\n  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"logRegistration\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"logRegistration\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to log the registration event\"\n          }), \"\\n\\n  \", _jsx(_components.span, {\n            className: \"token console class-name\",\n            children: \"console\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"log\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"User registration completed.\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Although this simplified code example might seem obvious, we often use this pattern and make functions call the next function in the sequence.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Recipe - Composition\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Another way is to use a recipe-like expression:\"\n    }), \"\\n\", _jsx(Mermaid, {\n      chart: \"\\n  sequenceDiagram\\n\\n  actor Client\\n  participant registerUser\\n  participant validateUser\\n  participant createUser\\n  participant sendConfirmationEmail\\n  participant logRegistration\\n\\n  registerUser -\u003e\u003e validateUser: userData\\n  registerUser -\u003e\u003e createUser: userData\\n  registerUser -\u003e\u003e sendConfirmationEmail: userData\\n  registerUser -\u003e\u003e logRegistration: userData\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-javascript\",\n        children: _jsxs(_components.code, {\n          className: \"language-javascript\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"registerUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token keyword control-flow\",\n            children: \"if\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token function\",\n            children: \"validateUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sendConfirmationEmail\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"logRegistration\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token console class-name\",\n            children: \"console\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"log\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"User registration completed.\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword control-flow\",\n            children: \"else\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"token console class-name\",\n            children: \"console\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"log\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"Invalid user data.\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"validateUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token keyword control-flow\",\n            children: \"return\"\n          }), \" userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"username\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u0026\u0026\"\n          }), \" userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"email\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"\u0026\u0026\"\n          }), \" userData\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token property-access\",\n            children: \"password\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"createUser\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to create a user account\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"sendConfirmationEmail\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to send a confirmation email\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\\n\", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"logRegistration\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token parameter\",\n            children: \"userData\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// Logic to log the registration event\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Analysis\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Objective coupling\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When employing function call cascading, all functions become tightly coupled to the objectives of the functions they call down the line.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For instance, let's consider the \", _jsx(_components.code, {\n        children: \"registerUser\"\n      }), \" function with the following goals:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Validate user\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Create user\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Send confirmation email\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Log registration\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In this case, the \", _jsx(_components.code, {\n        children: \"validateUser\"\n      }), \" function will \", _jsx(_components.strong, {\n        children: \"inherit\"\n      }), \" the same goals as \", _jsx(_components.code, {\n        children: \"registerUser\"\n      }), \". Similarly, the \", _jsx(_components.code, {\n        children: \"createUser\"\n      }), \" function will inherit all goals except for the validation of the user, and so on.\"]\n    }), \"\\n\", _jsx(Mermaid, {\n      chart: \"\\nflowchart LR\\n\\nsubgraph Functions\\n  registerUser\\n  validateUser\\n  createUser\\n  sendConfirmationEmail\\n  logRegistration\\nend\\n\\nsubgraph Goals\\n  validate-user[validate user]\\n  create-user[create user]\\n  send-confirmation-email[send confirmation email]\\n  log-registration[log registration]\\nend\\n\\nregisterUser --\u003e validateUser\\nregisterUser -.- validate-user\\nregisterUser -.- create-user\\nregisterUser -.- send-confirmation-email\\nregisterUser -.- log-registration\\n\\n\\nvalidateUser --\u003e createUser\\nvalidateUser -.-\u003evalidate-user\\nvalidateUser -.- create-user\\nvalidateUser -.- send-confirmation-email\\nvalidateUser -.- log-registration\\n\\n\\ncreateUser --\u003e sendConfirmationEmail\\ncreateUser -.-\u003ecreate-user\\ncreateUser -.- send-confirmation-email\\ncreateUser -.- log-registration\\n\\n\\nsendConfirmationEmail --\u003e logRegistration\\nsendConfirmationEmail -.-\u003esend-confirmation-email\\nsendConfirmationEmail -.- log-registration\\n\\n\\nlogRegistration -.-\u003elog-registration\"\n    }), \"\\n\", _jsx(Mermaid, {\n      chart: \"\\nflowchart LR\\n\\nsubgraph Functions\\n  registerUser\\n  validateUser\\n  createUser\\n  sendConfirmationEmail\\n  logRegistration\\nend\\n\\nsubgraph Goals\\n  validate-user[validate user]\\n  create-user[create user]\\n  send-confirmation-email[send confirmation email]\\n  log-registration[log registration]\\nend\\n\\nregisterUser --\u003e validateUser\\nregisterUser --\u003e createUser\\nregisterUser --\u003e sendConfirmationEmail\\nregisterUser --\u003e logRegistration\\n\\nregisterUser -.- validate-user\\nregisterUser -.- create-user\\nregisterUser -.- send-confirmation-email\\nregisterUser -.- log-registration\\n\\n\\nvalidateUser -.-\u003evalidate-user\\n\\ncreateUser -.-\u003ecreate-user\\n\\nsendConfirmationEmail -.-\u003esend-confirmation-email\\n\\nlogRegistration -.-\u003elog-registration\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This means that I cannot use any of the intermediate functions in a different context than the one aimed at achieving all those goals.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"I intentionally use the term \", _jsx(_components.strong, {\n        children: \"inherit\"\n      }), \" because the problem is reminiscent of the issues that arise when using inheritance for code reusability.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Single responsibility\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In line with the issue of objective coupling, every function that calls another function becomes coupled with the responsibilities of the subsequent function. While this coupling may make sense in some cases, such as the \", _jsx(_components.code, {\n        children: \"registerUser\"\n      }), \" function being responsible for all the effects (storing in a database, sending emails, etc.) related to user registration, even if it delegates each effect to a specific function.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"On the other hand, the \", _jsx(_components.code, {\n        children: \"validateUser\"\n      }), \" function should solely be responsible for user validation. However, by utilizing function call cascading, we inadvertently introduce the responsibility of creating a user, sending emails, and so on.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Testing\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When conducting integration testing on the \", _jsx(_components.code, {\n        children: \"registerUser\"\n      }), \" function (or any other top-level entry point), it becomes necessary to mock the entire I/O environment to ensure\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"correct behavior. However, it would be preferable to conduct unit tests on the individual composed functions in isolation.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"As a result of the objective and responsibility coupling, when function call cascading is used, we find ourselves obligated to mock the environment for testing each of the composed functions as well.\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"It's worth noting that certain languages, like Python with pytest fixtures, provide mechanisms that facilitate the mocking of intermediate functions.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Conclusion\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To enhance code reusability, testability, readability, and more, it is crucial to be self-conscious when encountering deep function call cascades. Take a moment to consider whether the flow you're attempting to describe could be flattened and written as a recipe instead. I firmly believe that by keeping a vigilant eye on this aspect, we can improve both our code and our overall development experiences.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"markdown":"# Function call cascading considered harmful\n\n## Introduction\n\nImproving the reusability and composability of software components is a common goal we all strive for. However, more often than not, we find ourselves falling short without a clear understanding of why. Sometimes, we favor one approach over another without a solid rationale, labeling the differences as mere programming styles.\n\nIn my case, I have a preference for writing code that reads like recipes. I strive to develop functions or components as if they will be utilized by multiple clients, even if that's not the current scenario. This personal style offers benefits such as reusability and testability, but I have also realized that it tends to veer toward overengineering, so it's important to keep that in check.\n\nDuring a recent refactoring process, I encountered a situation where the code followed a different style, and I found it more challenging to reason about, test, and reuse. Yet, I couldn't pinpoint a specific term or a clear, general rationale to explain why I felt that way.\n\nUpon reflection, I discovered the root of the problem, and with the help of Chat GPT, I uncovered the terms associated with those distinct styles.\n\nTo illustrate the problem clearly and make it more apparent, I will provide an example.\n\n## The problem\n\nConsider a web application that processes user registrations. When a new user signs up, various tasks need to be performed, such as validating the user's data, creating a user account, sending a confirmation email, and logging the registration event.\n\n### Function call cascading\n\nOne way of implementing this functionality is using function call cascading:\n\n```mermaid\n\n  sequenceDiagram\n\n  actor Client\n  participant registerUser\n  participant validateUser\n  participant createUser\n  participant sendConfirmationEmail\n  participant logRegistration\n\n  registerUser -\u003e\u003e validateUser: userData\n  validateUser -\u003e\u003e createUser: userData\n  createUser -\u003e\u003e sendConfirmationEmail: userData\n  sendConfirmationEmail -\u003e\u003e logRegistration: userData\n```\n\n```javascript\nfunction registerUser(userData) {\n  validateUser(userData);\n}\n\nfunction validateUser(userData) {\n  if (userData.username \u0026\u0026 userData.email \u0026\u0026 userData.password) {\n    createUser(userData);\n  } else {\n    console.log(\"Invalid user data.\");\n  }\n}\n\nfunction createUser(userData) {\n  // Logic to create a user account\n\n  sendConfirmationEmail(userData);\n}\n\nfunction sendConfirmationEmail(userData) {\n  // Logic to send a confirmation email\n\n  logRegistration(userData);\n}\n\nfunction logRegistration(userData) {\n  // Logic to log the registration event\n\n  console.log(\"User registration completed.\");\n}\n```\n\nAlthough this simplified code example might seem obvious, we often use this pattern and make functions call the next function in the sequence.\n\n### Recipe - Composition\n\nAnother way is to use a recipe-like expression:\n\n```mermaid\n\n  sequenceDiagram\n\n  actor Client\n  participant registerUser\n  participant validateUser\n  participant createUser\n  participant sendConfirmationEmail\n  participant logRegistration\n\n  registerUser -\u003e\u003e validateUser: userData\n  registerUser -\u003e\u003e createUser: userData\n  registerUser -\u003e\u003e sendConfirmationEmail: userData\n  registerUser -\u003e\u003e logRegistration: userData\n```\n\n```javascript\nfunction registerUser(userData) {\n  if (validateUser(userData)) {\n    createUser(userData);\n    sendConfirmationEmail(userData);\n    logRegistration(userData);\n    console.log(\"User registration completed.\");\n  } else {\n    console.log(\"Invalid user data.\");\n  }\n}\n\nfunction validateUser(userData) {\n  return userData.username \u0026\u0026 userData.email \u0026\u0026 userData.password;\n}\n\nfunction createUser(userData) {\n  // Logic to create a user account\n}\n\nfunction sendConfirmationEmail(userData) {\n  // Logic to send a confirmation email\n}\n\nfunction logRegistration(userData) {\n  // Logic to log the registration event\n}\n```\n\n## Analysis\n\n### Objective coupling\n\nWhen employing function call cascading, all functions become tightly coupled to the objectives of the functions they call down the line.\n\nFor instance, let's consider the `registerUser` function with the following goals:\n\n- Validate user\n- Create user\n- Send confirmation email\n- Log registration\n\nIn this case, the `validateUser` function will **inherit** the same goals as `registerUser`. Similarly, the `createUser` function will inherit all goals except for the validation of the user, and so on.\n\n```mermaid\n\nflowchart LR\n\nsubgraph Functions\n  registerUser\n  validateUser\n  createUser\n  sendConfirmationEmail\n  logRegistration\nend\n\nsubgraph Goals\n  validate-user[validate user]\n  create-user[create user]\n  send-confirmation-email[send confirmation email]\n  log-registration[log registration]\nend\n\nregisterUser --\u003e validateUser\nregisterUser -.- validate-user\nregisterUser -.- create-user\nregisterUser -.- send-confirmation-email\nregisterUser -.- log-registration\n\n\nvalidateUser --\u003e createUser\nvalidateUser -.-\u003evalidate-user\nvalidateUser -.- create-user\nvalidateUser -.- send-confirmation-email\nvalidateUser -.- log-registration\n\n\ncreateUser --\u003e sendConfirmationEmail\ncreateUser -.-\u003ecreate-user\ncreateUser -.- send-confirmation-email\ncreateUser -.- log-registration\n\n\nsendConfirmationEmail --\u003e logRegistration\nsendConfirmationEmail -.-\u003esend-confirmation-email\nsendConfirmationEmail -.- log-registration\n\n\nlogRegistration -.-\u003elog-registration\n```\n\n```mermaid\n\nflowchart LR\n\nsubgraph Functions\n  registerUser\n  validateUser\n  createUser\n  sendConfirmationEmail\n  logRegistration\nend\n\nsubgraph Goals\n  validate-user[validate user]\n  create-user[create user]\n  send-confirmation-email[send confirmation email]\n  log-registration[log registration]\nend\n\nregisterUser --\u003e validateUser\nregisterUser --\u003e createUser\nregisterUser --\u003e sendConfirmationEmail\nregisterUser --\u003e logRegistration\n\nregisterUser -.- validate-user\nregisterUser -.- create-user\nregisterUser -.- send-confirmation-email\nregisterUser -.- log-registration\n\n\nvalidateUser -.-\u003evalidate-user\n\ncreateUser -.-\u003ecreate-user\n\nsendConfirmationEmail -.-\u003esend-confirmation-email\n\nlogRegistration -.-\u003elog-registration\n```\n\nThis means that I cannot use any of the intermediate functions in a different context than the one aimed at achieving all those goals.\n\nI intentionally use the term **inherit** because the problem is reminiscent of the issues that arise when using inheritance for code reusability.\n\n### Single responsibility\n\nIn line with the issue of objective coupling, every function that calls another function becomes coupled with the responsibilities of the subsequent function. While this coupling may make sense in some cases, such as the `registerUser` function being responsible for all the effects (storing in a database, sending emails, etc.) related to user registration, even if it delegates each effect to a specific function.\n\nOn the other hand, the `validateUser` function should solely be responsible for user validation. However, by utilizing function call cascading, we inadvertently introduce the responsibility of creating a user, sending emails, and so on.\n\n### Testing\n\nWhen conducting integration testing on the `registerUser` function (or any other top-level entry point), it becomes necessary to mock the entire I/O environment to ensure\n\ncorrect behavior. However, it would be preferable to conduct unit tests on the individual composed functions in isolation.\n\nAs a result of the objective and responsibility coupling, when function call cascading is used, we find ourselves obligated to mock the environment for testing each of the composed functions as well.\n\n\u003e It's worth noting that certain languages, like Python with pytest fixtures, provide mechanisms that facilitate the mocking of intermediate functions.\n\n## Conclusion\n\nTo enhance code reusability, testability, readability, and more, it is crucial to be self-conscious when encountering deep function call cascades. Take a moment to consider whether the flow you're attempting to describe could be flattened and written as a recipe instead. I firmly believe that by keeping a vigilant eye on this aspect, we can improve both our code and our overall development experiences.\n"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"function-call-cascading"},"buildId":"C7JIGo2bhUdVsan4ZWi65","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>